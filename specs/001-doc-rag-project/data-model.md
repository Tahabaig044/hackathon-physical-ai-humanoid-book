# Data Model: Physical AI & Humanoid Robotics Textbook RAG Chatbot

This document outlines the key entities and their relationships for the Retrieval-Augmented Generation (RAG) chatbot backend, as part of the Physical AI & Humanoid Robotics Textbook project.

## Entities

### 1. Document
Represents a segment of the textbook content that can be retrieved by the RAG system. This could be a chapter, section, or paragraph.

- **document_id**: Unique identifier for the document (UUID).
- **content**: The textual content of the document (String).
- **embedding**: Vector representation of the content, used for similarity search (Vector, e.g., float[]).
- **source_url**: URL to the original Docusaurus page/section (String).
- **module**: The module the document belongs to (e.g., "ROS 2", "Gazebo & Unity") (String).
- **chapter**: The chapter within the module (String).
- **last_updated**: Timestamp of when the document was last updated (DateTime).

### 2. User
Represents a user interacting with the chatbot or the textbook.

- **user_id**: Unique identifier for the user (UUID).
- **email**: User's email address (String, unique).
- **password_hash**: Hashed password for authentication (String).
- **preferences**: JSON field for personalized content delivery settings (JSONB).
- **created_at**: Timestamp of user creation (DateTime).

### 3. Conversation
Represents a chat session between a user and the RAG chatbot.

- **conversation_id**: Unique identifier for the conversation (UUID).
- **user_id**: Foreign key referencing the User entity (UUID).
- **started_at**: Timestamp when the conversation began (DateTime).
- **last_activity_at**: Timestamp of the last message in the conversation (DateTime).

### 4. Message
Represents a single message within a conversation, either from the user or the chatbot.

- **message_id**: Unique identifier for the message (UUID).
- **conversation_id**: Foreign key referencing the Conversation entity (UUID).
- **user_id**: Foreign key referencing the User entity (UUID, can be null if bot message).
- **content**: The text of the message (String).
- **role**: "user" or "bot" (String).
- **timestamp**: Time when the message was sent (DateTime).
- **retrieved_documents**: Array of document_ids that were retrieved for this message's response (Array of UUIDs, nullable).

## Relationships

-   **User has many Conversations**: One User can initiate multiple Conversations.
-   **Conversation has many Messages**: One Conversation contains multiple Messages.
-   **Message references Document**: Messages generated by the bot can reference multiple Documents used for retrieval.
